const Y=window.Vue,{BaseTransition:ue,BaseTransitionPropsValidators:de,Comment:pe,DeprecationTypes:ce,EffectScope:me,ErrorCodes:ve,ErrorTypeStrings:ge,Fragment:fe,KeepAlive:ye,ReactiveEffect:he,Static:Ce,Suspense:xe,Teleport:ke,Text:we,TrackOpTypes:Se,Transition:Me,TransitionGroup:Re,TriggerOpTypes:Te,VueElement:Le,__esModule:be,assertNumber:Fe,callWithAsyncErrorHandling:Ee,callWithErrorHandling:Ve,camelize:Ie,capitalize:ze,cloneVNode:Pe,compatUtils:_e,compile:Ne,computed:k,createApp:Ae,createBlock:w,createCommentVNode:y,createElementBlock:L,createElementVNode:u,createHydrationRenderer:He,createPropsRestProxy:Be,createRenderer:De,createSSRApp:Oe,createSlots:Ue,createStaticVNode:Ge,createTextVNode:h,createVNode:b,customRef:Ke,defineAsyncComponent:We,defineComponent:je,defineCustomElement:qe,defineEmits:Ze,defineExpose:$e,defineModel:Je,defineOptions:Qe,defineProps:Ye,defineSSRCustomElement:Xe,defineSlots:et,devtools:tt,effect:ot,effectScope:at,getCurrentInstance:lt,getCurrentScope:nt,getCurrentWatcher:st,getTransitionRawChildren:rt,guardReactiveProps:it,h:ut,handleError:dt,hasInjectionContext:pt,hydrate:ct,hydrateOnIdle:mt,hydrateOnInteraction:vt,hydrateOnMediaQuery:gt,hydrateOnVisible:ft,initCustomFormatter:yt,initDirectivesForSSR:ht,inject:Ct,isMemoSame:xt,isProxy:kt,isReactive:wt,isReadonly:St,isRef:Mt,isRuntimeOnly:Rt,isShallow:Tt,isVNode:Lt,markRaw:bt,mergeDefaults:Ft,mergeModels:Et,mergeProps:Vt,nextTick:It,nodeOps:zt,normalizeClass:Pt,normalizeProps:_t,normalizeStyle:Nt,onActivated:At,onBeforeMount:Ht,onBeforeUnmount:Bt,onBeforeUpdate:Dt,onDeactivated:Ot,onErrorCaptured:Ut,onMounted:X,onRenderTracked:Gt,onRenderTriggered:Kt,onScopeDispose:Wt,onServerPrefetch:jt,onUnmounted:qt,onUpdated:Zt,onWatcherCleanup:$t,openBlock:d,patchProp:Jt,popScopeId:Qt,provide:Yt,proxyRefs:Xt,pushScopeId:eo,queuePostFlushCb:to,reactive:oo,readonly:ao,ref:l,registerRuntimeCompiler:lo,render:no,renderList:so,renderSlot:ro,resolveComponent:S,resolveDirective:io,resolveDynamicComponent:uo,resolveFilter:po,resolveTransitionHooks:co,setBlockTracking:mo,setDevtoolsHook:vo,setTransitionHooks:go,shallowReactive:fo,shallowReadonly:yo,shallowRef:ho,ssrContextKey:Co,ssrUtils:xo,stop:ko,toDisplayString:wo,toHandlerKey:So,toHandlers:Mo,toRaw:Ro,toRef:To,toRefs:Lo,toValue:bo,transformVNodeArgs:Fo,triggerRef:Eo,unref:Vo,useAttrs:Io,useCssModule:zo,useCssVars:Po,useHost:_o,useId:No,useModel:Ao,useSSRContext:Ho,useShadowRoot:Bo,useSlots:Do,useTemplateRef:Oo,useTransitionState:Uo,vModelCheckbox:Go,vModelDynamic:Ko,vModelRadio:Wo,vModelSelect:jo,vModelText:qo,vShow:Zo,version:$o,warn:Jo,watch:ee,watchEffect:Qo,watchPostEffect:Yo,watchSyncEffect:Xo,withAsyncContext:ea,withCtx:ta,withDefaults:oa,withDirectives:aa,withKeys:te,withMemo:la,withModifiers:F,withScopeId:na}=Y,{Fieldtype:E,IndexFieldtype:sa,FieldtypeMixin:ra,HasActionsMixin:ia,HasInputOptionsMixin:ua,HasPreferencesMixin:da,IndexFieldtypeMixin:pa,InlineEditForm:ca,DateFormatter:ma,ItemActions:va,RelatedItem:ga,RestoreRevision:fa,RevisionHistory:ya,RevisionPreview:ha,SaveButtonOptions:Ca,SortableList:xa,requireElevatedSession:ka,requireElevatedSessionIf:wa,clone:Sa,deepClone:Ma,resetValuesFromResponse:Ra}=__STATAMIC__.core,oe={class:"space-y-2"},ae={class:"flex justify-between"},le={class:"flex items-center gap-8 text-sm"},ne={class:"flex items-center gap-2"},se={key:0,class:"flex items-center gap-2"},re={key:1},ie={__name:"GoogleMapFieldtype",props:E.props,emits:E.emits,setup(_,{expose:N,emit:A}){const H=A,t=_,{expose:B,update:D}=E.use(H,t);N(B);const p=l(null),c=l(null),s=l(null),r=l(null),m=l(null),v=l(null),g=l(null),f=l(!1),a=l(null),n=l(null),M=l(!1),C=l(!1),V=l(null),R=l(null),I=l(null),O=k(()=>t.config.geocoder),U=k(()=>t.meta.defaultLat&&t.meta.defaultLng),G=k(()=>p.value!=t.meta.defaultLat||c.value!=t.meta.defaultLng||m.value!=t.config.initial_zoom||v.value!=t.config.initial_type);k(()=>navigator.geolocation||!1),ee([p,c,s,r,m,v,g,f],()=>{j()});const K=()=>{t.config.markers&&a.value.addListener("click",e=>{x(e.latLng),s.value=e.latLng.lat(),r.value=e.latLng.lng()}),a.value.addListener("center_changed",()=>{p.value=a.value.getCenter().lat(),c.value=a.value.getCenter().lng()}),a.value.addListener("zoom_changed",()=>{m.value=a.value.getZoom()}),a.value.addListener("maptypeid_changed",()=>{v.value=a.value.getMapTypeId()})},x=e=>{n.value.setMap(a.value),n.value.setPosition(e),n.value.setVisible(!0),s.value=e.lat(),r.value=e.lng(),M.value=!0},z=()=>{n.value.setMap(null),n.value.setPosition(null),n.value.setVisible(!1),s.value=null,r.value=null,M.value=!1},W=()=>{a.value.setCenter({lat:Number.parseFloat(t.meta.defaultLat),lng:Number.parseFloat(t.meta.defaultLng)}),a.value.setZoom(Number(t.meta.defaultZoom)||16),a.value.setMapTypeId(Number(t.meta.defaultType)||"roadmap"),z()},j=()=>{D({lat:p.value,lng:c.value,markerLat:s.value,markerLng:r.value,zoom:m.value,type:v.value,style:g.value,showControls:f.value})},q=()=>{V.value.geocode({address:R.value}).then(e=>{if(e.results.length>0){console.log("Location found");let o=e.results[0].geometry.location;a.value.setCenter(o),x(o)}else console.error("Location not found")}).catch(e=>{console.error(e.message)})},Z=()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{const o={lat:e.coords.latitude,lng:e.coords.longitude};a.value.setCenter(o)},()=>{console.debug("Error getting user position")})},$=()=>{const e=document.createElement("button");e.innerHTML=`
<?xml version="1.0" encoding="iso-8859-1"?>
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512; display: block;" xml:space="preserve">
<g><g><path d="M256,0c-48.551,0-95.818,13.675-136.693,39.545l16.044,25.35C171.419,42.066,213.139,30,256,30 c42.861,0,84.581,12.066,120.648,34.895l16.044-25.35C351.818,13.675,304.551,0,256,0z"/></g></g>
<g><g><path d="M376.649,447.105C340.581,469.934,298.861,482,256,482c-42.861,0-84.581-12.066-120.648-34.895l-16.044,25.35 C160.182,498.325,207.449,512,256,512c48.551,0,95.818-13.675,136.693-39.545L376.649,447.105z"/></g></g>
<g><g><path d="M472.455,119.307l-25.35,16.044C469.934,171.419,482,213.139,482,256c0,42.861-12.066,84.581-34.895,120.648l25.35,16.044 C498.325,351.818,512,304.551,512,256C512,207.449,498.325,160.182,472.455,119.307z"/></g></g>
<g><g><path d="M64.895,135.352l-25.35-16.045C13.675,160.182,0,207.449,0,256c0,48.551,13.675,95.818,39.545,136.693l25.35-16.044 C42.066,340.581,30,298.861,30,256C30,213.139,42.066,171.419,64.895,135.352z"/></g></g>
<g><g><path d="M256,204c-28.673,0-52,23.327-52,52c0,28.673,23.327,52,52,52c28.673,0,52-23.327,52-52C308,227.327,284.673,204,256,204z M256,278c-12.131,0-22-9.869-22-22s9.869-22,22-22c12.131,0,22,9.869,22,22S268.131,278,256,278z"/></g></g>
</svg>`,e.style.margin="10px",e.style.padding="8px",e.style.width="40px",e.style.boxShadow="rgba(0, 0, 0, 0.3) 0px 1px 4px -1px",e.style.backgroundColor="#FFFFFF",e.addEventListener("mouseover",()=>e.style.backgroundColor="#EFEFEF"),e.addEventListener("mouseout",()=>e.style.backgroundColor="#FFFFFF"),e.addEventListener("click",()=>Z()),a.value.controls[google.maps.ControlPosition.RIGHT_TOP].push(e)};return X(()=>{p.value=t.value.lat||t.meta.defaultLat,c.value=t.value.lng||t.meta.defaultLng,s.value=t.value.markerLat,r.value=t.value.markerLng,m.value=t.value.zoom||t.config.initial_zoom||16,v.value=t.value.type||t.config.initial_type||"roadmap",g.value=t.value.style,C.value=!!t.value.style,f.value=t.value.showControls,a.value=new google.maps.Map(I.value,{zoom:Number(m.value),center:{lat:Number.parseFloat(p.value),lng:Number.parseFloat(c.value)},mapTypeId:v.value,mapTypeControl:t.config.maptypes,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.TERRAIN,google.maps.MapTypeId.HYBRID]},streetViewControl:!1}),t.config.markers&&(n.value=new google.maps.Marker({clickable:!1,draggable:!0}),n.value.addListener("dragend",()=>{s.value=n.value.getPosition().lat(),r.value=n.value.getPosition().lng()}),s.value&&r.value&&x(new google.maps.LatLng(Number.parseFloat(s.value),Number.parseFloat(r.value)))),t.config.geocoder&&(V.value=new google.maps.Geocoder),K(),$()}),(e,o)=>{const J=S("ui-input"),T=S("ui-button"),P=S("ui-switch"),Q=S("ui-textarea");return d(),L("div",oe,[O.value?(d(),w(J,{key:0,type:"text",modelValue:R.value,"onUpdate:modelValue":o[0]||(o[0]=i=>R.value=i),onKeyup:te(q,["enter"]),placeholder:"Search location"},null,8,["modelValue"])):y("",!0),u("div",{class:"w-full h-96 rounded google-maps-container",ref_key:"mapRef",ref:I},null,512),u("div",ae,[u("div",null,[M.value?(d(),w(T,{key:0,variant:"danger",size:"xs",text:"Remove marker",onClick:o[1]||(o[1]=F(i=>z(),["prevent"]))})):e.config.markers?(d(),w(T,{key:1,variant:"primary",size:"xs",text:"Add marker",onClick:o[2]||(o[2]=F(i=>x(a.value.getCenter()),["prevent"]))})):y("",!0)]),u("div",null,[U.value&&G.value?(d(),w(T,{key:0,variant:"ghost",size:"xs",text:"Reset map",onClick:F(W,["prevent"])})):y("",!0)])]),u("div",le,[u("div",ne,[b(P,{modelValue:f.value,"onUpdate:modelValue":o[3]||(o[3]=i=>f.value=i),size:"sm"},null,8,["modelValue"]),o[6]||(o[6]=h(" Show map controls",-1))]),e.meta.pro&&!e.config.hideStyles?(d(),L("div",se,[b(P,{modelValue:C.value,"onUpdate:modelValue":o[4]||(o[4]=i=>C.value=i),size:"sm"},null,8,["modelValue"]),o[7]||(o[7]=h(" Use custom styling",-1))])):y("",!0)]),e.meta.pro&&!e.config.hideStyles&&C.value?(d(),L("div",re,[b(Q,{modelValue:g.value,"onUpdate:modelValue":o[5]||(o[5]=i=>g.value=i),placeholder:"Paste in the styles as JSON"},null,8,["modelValue"]),o[8]||(o[8]=u("div",{class:"text-gray-600 text-xs"},[h("Need help? Check out the "),u("a",{href:"https://mapstyle.withgoogle.com/",target:"_blank"},"style tool"),h(" or "),u("a",{href:"https://snazzymaps.com/",target:"_blank"},"Snazzy Maps"),h(".")],-1))])):y("",!0)])}}};Statamic.booting(()=>{Statamic.$components.register("google_map-fieldtype",ie)});
